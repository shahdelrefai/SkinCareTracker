<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:SkinCareTracker.ViewModels"
             x:Class="SkinCareTracker.Views.ProductDetailPage"
             x:DataType="vm:ProductDetailViewModel"
             Title="Product Details">

    <ContentPage.ToolbarItems>
        <ToolbarItem Text="Edit" Command="{Binding EditCommand}" />
    </ContentPage.ToolbarItems>

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">

            <ActivityIndicator IsRunning="{Binding IsLoading}"
                               IsVisible="{Binding IsLoading}"
                               HorizontalOptions="Center"
                               VerticalOptions="Center" />

            <VerticalStackLayout IsVisible="{Binding IsLoading, Converter={StaticResource InvertedBoolConverter}}"
                                 Spacing="15">

                <Label Text="{Binding Product.Name}"
                       FontSize="28"
                       FontAttributes="Bold" />

                <BoxView HeightRequest="1" Color="LightGray" />

                <Label Text="Brand" FontAttributes="Bold" />
                <Label Text="{Binding Product.Brand}" FontSize="16" />

                <Label Text="Category" FontAttributes="Bold" />
                <Label Text="{Binding Product.Category}" FontSize="16" />

                <Label Text="Purchase Date" FontAttributes="Bold" />
                <Label Text="{Binding Product.PurchaseDate, StringFormat='{0:MMMM dd, yyyy}'}" 
                       FontSize="16" />

                <Label Text="Expiry Date" FontAttributes="Bold" />
                <Label Text="{Binding Product.ExpiryDate, StringFormat='{0:MMMM dd, yyyy}'}" 
                       FontSize="16" />

                <Label Text="Ingredients" FontAttributes="Bold" />
                <Label Text="{Binding Product.Ingredients}" 
                       FontSize="14"
                       LineBreakMode="WordWrap" />

                <Label Text="Notes" 
                       FontAttributes="Bold"
                       IsVisible="{Binding Product.Notes, Converter={StaticResource IsStringNotNullOrEmptyConverter}}" />
                <Label Text="{Binding Product.Notes}" 
                       FontSize="14"
                       LineBreakMode="WordWrap"
                       IsVisible="{Binding Product.Notes, Converter={StaticResource IsStringNotNullOrEmptyConverter}}" />

                <Button Text="Delete Product"
                        Command="{Binding DeleteCommand}"
                        BackgroundColor="Red"
                        TextColor="White"
                        Margin="0,30,0,0" />

            </VerticalStackLayout>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>